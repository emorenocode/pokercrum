<!-- <pre>{{ user() | json }}</pre> -->

@if (player().username != '') {
<section class="card-list-container">
  <h2>Cards</h2>
  <div class="card-list">
    @for (card of cards(); track $index) {
    <button
      class="card flipped"
      [class.selected]="card === cardSelected"
      [class.disabled]="showCards()"
      (click)="onSelectCard(card)"
      title="{{ card.label }}"
    >
      <div class="card__inner">
        <div class="card__front">ðŸ”¥</div>
        <div class="card__back">
          {{ card.value }}
        </div>
      </div>
    </button>
    }
  </div>
</section>

<section class="participants">
  <h2>Participants</h2>
  <div class="user-list">
    @for (participant of participants(); track $index) {
    <div class="user">
      <div class="card disabled" [class.flipped]="showCards()">
        <div class="card__inner">
          <div class="card__front">{{ participant.card?.value ? 'ðŸ”¥' : '' }}</div>
          <div class="card__back">{{ participant.card?.value }}</div>
        </div>
        @if (player().role === 'admin') {
        <button (click)="onDeletePlayer(participant.id)">x</button>
        }
      </div>
      <span>{{ participant.username }}</span>
    </div>
    }
  </div>
</section>

<section>
  <h2>Result</h2>
  <div class="result-list">
    @if (showCards()) { @for (card of cardResult(); track $index) {
    <div class="result">
      <span class="result-label">{{ card.label }}</span>
      <div class="card disabled flipped">
        <div class="card__inner">
          <div class="card__front">ðŸ”¥</div>
          <div class="card__back">{{ card.value }}</div>
        </div>
      </div>
    </div>
    } }
  </div>
  @if (player().role === 'admin') { @if (showCards()) {
  <button class="btn" (click)="onResetCards()">Reset</button>
  } @else {
  <button class="btn" (click)="onShowCards()">Reveal</button>
  } }
</section>
} @else {
<div class="join-room">
  <input type="text" name="username" placeholder="Enter Username" [formControl]="username" />
  <button (click)="onJoinRoom()">Join Room</button>
  @if (username.touched && username.invalid) {
  <div>username is required</div>
  }
</div>
}
